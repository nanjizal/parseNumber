@:nullSafety @:noDoc @:dox(hide)
class hx.doctest.internal.adapters.UTestDocTestAdapter extends hx.doctest.internal.adapters.DocTestAdapter {

	public inline function new() {}

	public function getFrameworkName() {
		return "utest";
	}

	@:has_untyped
	public function generateTestFail(assertion:hx.doctest.internal.DocTestAssertion, errorMsg:String) {
		return cast {expr : haxe.macro.ExprDef.EBlock([{expr : haxe.macro.ExprDef.ECall({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EConst(haxe.macro.Constant.CIdent("utest")), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 623, 628)}, "Assert"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 623, 635)}, "fail"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 623, 640)}, [haxe.macro.Context.makeExpr("" + assertion.expression + " --> " + errorMsg, $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 643, 684)), {expr : haxe.macro.ExprDef.ECast(haxe.macro.Context.makeExpr(assertion.pos, $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 693, 708)), null), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 686, 708)}]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 623, 709)}]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 612, 718)};
	}

	@:has_untyped
	public function generateTestSuccess(assertion:hx.doctest.internal.DocTestAssertion) {
		return cast {expr : haxe.macro.ExprDef.EBlock([{expr : haxe.macro.ExprDef.ECall({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EConst(haxe.macro.Constant.CIdent("utest")), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 843, 848)}, "Assert"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 843, 855)}, "pass"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 843, 860)}, [haxe.macro.Context.makeExpr("" + assertion.pos.fileName + ":" + assertion.pos.lineNumber + " [OK] " + assertion.expression, $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 863, 949)), {expr : haxe.macro.ExprDef.ECast(haxe.macro.Context.makeExpr(assertion.pos, $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 958, 973)), null), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 951, 973)}]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 843, 974)}]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 832, 983)};
	}

	public function onFinish(contextFields:Array<haxe.macro.Field>) {
		var cls = haxe.macro.Context.getLocalClass().get();
		cls.meta.remove(":utestProcessed");
		{
			var ` = 0;
			while (` < contextFields.length) {
				var f = contextFields[`];
				++ `;
				if (f.name == "__initializeUtest__") {
					contextFields.remove(f);
					break;
				};
			};
		};
	}
}